# pytest.ini
# Pytest configuration file for the FastAPI Calculator application
# This file configures how pytest discovers and runs tests

[pytest]
# ============================================================================
# Test Discovery Configuration
# ============================================================================

# Specifies that tests are contained in the 'tests' folder
testpaths = tests

# Automatically discover test files matching 'test_*.py' or '*_test.py'
python_files = test_*.py *_test.py

# Automatically discover test classes that match 'Test*'
python_classes = Test*

# Automatically discover test functions that match 'test_*'
python_functions = test_*

# ============================================================================
# Coverage Configuration
# ============================================================================

# Coverage options - run coverage by default
addopts = 
    --cov=app 
    --cov=main
    --cov-report=term-missing
    --cov-report=html
    --cov-report=xml
    -v

# Coverage omit patterns (exclude certain files from coverage)
omit = 
    */tests/*
    */venv/*
    */__pycache__/*

# ============================================================================
# Test Markers
# ============================================================================

# Custom markers for organizing tests
markers =
    unit: marks tests as unit tests (fast, isolated)
    integration: marks tests as integration tests (medium speed)
    e2e: marks tests as end-to-end tests (slower, full workflow)
    slow: marks tests as slow (deselect with '-m "not slow"')
    fast: marks tests as fast (deselect with '-m "not fast"')

# ============================================================================
# Logging Configuration
# ============================================================================

# Log level during testing
log_cli = false
log_cli_level = INFO
log_file = logs/pytest.log
log_file_level = DEBUG

# ============================================================================
# Warning Filters
# ============================================================================

# Suppress specific warnings during testing
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::ResourceWarning
    ignore::UserWarning
# log_level = INFO
